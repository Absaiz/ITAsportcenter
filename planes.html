<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    
    <link rel="manifest" href="manifest.json">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="apple-touch-icon" href="imagen/logoico.png">
    <link rel="icon" type="image/png" href="imagen/logoico.png">
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ITA | Tarifas</title>
 
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;700&family=Oswald:wght@500;700&display=swap" rel="stylesheet">
    
    <script>
        const v = Date.now();
        function cargarCSS(src) {
            const l = document.createElement("link"); l.rel = "stylesheet"; l.href = src + '?v=' + v; document.head.appendChild(l);
        }
        function cargarJS(src) {
            const s = document.createElement('script'); s.type = 'module'; s.src = src + '?v=' + v; document.head.appendChild(s);
        }
        cargarCSS('style.css');
        cargarJS('layout.js');
        cargarJS('user-logic.js');
    </script>
</head>
<body>
 
    <section class="container">
        <h2 class="section-title">Nuestras Tarifas</h2>
        <p style="text-align:center; color:#888; margin-bottom:40px;">Elige el plan que mejor se adapte a tus objetivos.</p>

        <div class="plans-grid">
            
            <div class="plan-card">
                <h3 class="plan-header" id="p1_nom">...</h3>
                <span class="plan-subtitle" id="p1_sub">...</span>
                <div class="plan-price" id="p1_pre">...</div>
                <div class="plan-features" id="p1_feat">...</div>
                <a href="contacto.html" class="btn-plan">ELEGIR PLAN</a>
            </div>

            <div class="plan-card plan-featured">
                <h3 class="plan-header" id="p2_nom">...</h3>
                <span class="plan-subtitle" id="p2_sub">...</span>
                <div class="plan-price" id="p2_pre" style="color:var(--accent-pink)">...</div>
                <div class="plan-features" id="p2_feat">...</div>
                <a href="contacto.html" class="btn-plan" style="background:var(--accent-pink); border-color:var(--accent-pink)">ELEGIR PLAN</a>
            </div>

            <div class="plan-card">
                <h3 class="plan-header" id="p3_nom">...</h3>
                <span class="plan-subtitle" id="p3_sub">...</span>
                <div class="plan-price" id="p3_pre">...</div>
                <div class="plan-features" id="p3_feat">...</div>
                <a href="contacto.html" class="btn-plan">ELEGIR PLAN</a>
            </div>

        </div>
    </section>

    <script type="module">
        import { db } from "./firebase-config.js";
        import { doc, getDoc } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";

        async function cargarTarifas() {
            try {
                const docRef = doc(db, "contenidos_web", "tarifas");
                const docSnap = await getDoc(docRef);

                if (docSnap.exists()) {
                    const t = docSnap.data();

                    // Función auxiliar para formatear la lista de características
                    const formatFeat = (texto) => {
                        if(!texto) return "";
                        // Divide por comas y pone saltos de línea
                        return texto.split(',').map(item => `• ${item.trim()}`).join('<br>');
                    };

                    // PLAN 1
                    document.getElementById('p1_nom').innerText = t.p1_nom || "Básico";
                    document.getElementById('p1_sub').innerText = t.p1_sub || "Mensual";
                    document.getElementById('p1_pre').innerText = (t.p1_pre || "0") + "€";
                    document.getElementById('p1_feat').innerHTML = formatFeat(t.p1_feat);

                    // PLAN 2
                    document.getElementById('p2_nom').innerText = t.p2_nom || "Pro";
                    document.getElementById('p2_sub').innerText = t.p2_sub || "Trimestral";
                    document.getElementById('p2_pre').innerText = (t.p2_pre || "0") + "€";
                    document.getElementById('p2_feat').innerHTML = formatFeat(t.p2_feat);

                    // PLAN 3
                    document.getElementById('p3_nom').innerText = t.p3_nom || "Bono";
                    document.getElementById('p3_sub').innerText = t.p3_sub || "10 Sesiones";
                    document.getElementById('p3_pre').innerText = (t.p3_pre || "0") + "€";
                    document.getElementById('p3_feat').innerHTML = formatFeat(t.p3_feat);
                }

            } catch (error) {
                console.error("Error cargando tarifas:", error);
            }
        }

        cargarTarifas();
    </script>

</body>
</html>